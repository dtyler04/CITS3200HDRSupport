{% extends "base.html" %}

{% block title %}TinyMCE Test Editor{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='email_editor.css') }}">
<style>
    .tinymce-container {
        max-width: 1200px;
        margin: 20px auto;
        padding: 20px;
        background-color: #f9f9f9;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
    }
    .form-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
        gap: 10px;
    }
    .btn-group {
        display: flex;
        gap: 10px;
    }
    .comparison-note {
        background-color: #e3f2fd;
        border: 1px solid #2196f3;
        border-radius: 4px;
        padding: 15px;
        margin-bottom: 20px;
        color: #1565c0;
    }
    .test-input-group {
        margin-bottom: 15px;
    }
    .test-input-group input {
        padding: 8px;
        margin-right: 10px;
        border: 1px solid #ddd;
        border-radius: 4px;
    }
</style>
{% endblock %}

{% block content %}
<div class="tinymce-container">
    <div class="comparison-note">
        <h4>ðŸ§ª TinyMCE Test Page</h4>
        <p>This is a test page to evaluate TinyMCE functionality before replacing CKEditor. 
        Compare features like formatting, image handling, table creation, and overall user experience.</p>
        <div class="alert alert-info mt-2" style="background-color: #e3f2fd; border: 1px solid #2196f3; border-radius: 4px; padding: 10px;">
            <strong>ðŸ“‹ Word Document Import:</strong> Use the "Import Word Doc" button to convert .docx files with images and formatting! Text formatting and images will be preserved. For manual pasting, copy/paste images directly from your file system.
        </div>
    </div>

    <form id="tinyMCEForm" method="POST" action="{{ url_for('save_tinymce_test') }}">>
        <div class="form-controls">
            <div class="btn-group">
                <button type="submit" class="btn btn-primary">Save Content</button>
                <button type="button" class="btn btn-secondary" onclick="loadSampleContent()">Load Sample</button>
                <button type="button" class="btn btn-info" onclick="getContent()">Get HTML</button>
                <button type="button" class="btn btn-warning" onclick="clearContent()">Clear</button>
                <input type="file" id="wordUpload" accept=".docx" style="display: none;" onchange="handleWordUpload(this)">
                <button type="button" class="btn btn-success" onclick="document.getElementById('wordUpload').click()">ðŸ“„ Import Word Doc</button>
            </div>
            <a href="{{ url_for('admin.email_editor') }}" class="btn btn-outline-primary">Compare with CKEditor</a>
        </div>

        <div class="test-input-group">
            <input type="text" name="test_title" placeholder="Email Title" value="TinyMCE Test Email">
            <input type="text" name="degree_code" placeholder="Degree Code" value="TEST123">
            <input type="number" name="week_released" placeholder="Week" value="1">
        </div>

        <textarea id="tinyMCEEditor" name="content">
            <h2>Welcome to TinyMCE Testing</h2>
            <p>This is a test environment for <strong>TinyMCE</strong> rich text editor.</p>
            
            <h3>Features to Test:</h3>
            <ul>
                <li><strong>Text Formatting:</strong> Bold, italic, underline, colors</li>
                <li><strong>Lists:</strong> Bulleted and numbered lists</li>
                <li><strong>Tables:</strong> Create and edit tables</li>
                <li><strong>Images:</strong> Insert and resize images</li>
                <li><strong>Links:</strong> Create hyperlinks</li>
                <li><strong>Code:</strong> Insert code blocks</li>
            </ul>

            <h3>Sample Table</h3>
            <table border="1" style="border-collapse: collapse; width: 100%;">
                <thead>
                    <tr>
                        <th>Feature</th>
                        <th>TinyMCE</th>
                        <th>CKEditor</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Ease of Setup</td>
                        <td>âœ“</td>
                        <td>âœ“</td>
                    </tr>
                    <tr>
                        <td>Plugin Ecosystem</td>
                        <td>Test here</td>
                        <td>Extensive</td>
                    </tr>
                </tbody>
            </table>

            <p><em>Try editing this content to test TinyMCE functionality!</em></p>
        </textarea>

        <div id="content-output" style="margin-top: 20px; padding: 15px; background: #f5f5f5; border-radius: 4px; display: none;">
            <h4>Generated HTML:</h4>
            <pre id="html-output" style="background: white; padding: 10px; border-radius: 4px; overflow-x: auto;"></pre>
        </div>
    </form>
</div>

<!-- Mammoth.js for Word document import -->
<script src="https://cdn.jsdelivr.net/npm/mammoth@1.6.0/mammoth.browser.min.js"></script>
<!-- TinyMCE Script -->
<script src="{{ url_for('static', filename='tinymce/js/tinymce/tinymce.min.js') }}"></script>
<script src="{{ url_for('static', filename='tinymce_test.js') }}"></script>
{% endblock %}